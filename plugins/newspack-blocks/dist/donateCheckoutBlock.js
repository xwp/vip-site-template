(()=>{var e,t,n={};function o(t){var n=t.querySelector("iframe");n&&(n.src="about:blank"),document.body.classList.remove("newspack-modal-checkout-open"),e.disconnect(),t.style.display="none"}t=function(){var t=document.querySelector(".newspack-blocks-donate-checkout-modal");if(t){var n=document.querySelector(".newspack-blocks-donate-checkout-modal__spinner"),c="newspack_modal_checkout",a=document.createElement("input");a.type="hidden",a.name="modal_checkout",a.value="1";var d=t.querySelector(".newspack-blocks-donate-checkout-modal__content"),r=document.createElement("iframe");r.name=c,d.appendChild(r),document.querySelectorAll(".wpbnbd.wpbnbd--platform-wc").forEach((function(o){o.querySelectorAll("form").forEach((function(o){o.appendChild(a.cloneNode()),o.target=c,o.addEventListener("submit",(function(){n.style.display="flex",t.style.display="block",document.body.classList.add("newspack-modal-checkout-open"),e=new ResizeObserver((function(e){if(e&&e.length){var t=e[0].contentRect;t&&(d.style.height=t.top+t.bottom+"px")}})),r.addEventListener("load",(function(){var t=r.contentWindow.location;if(window.newspackReaderActivation&&t.href.indexOf("order-received")>-1){var o=window.newspackReaderActivation,c=new Proxy(new URLSearchParams(t.search),{get:function(e,t){return e.get(t)}});c.email&&(o.setReaderEmail(c.email),o.setAuthenticated(!0))}var a=r.contentWindow.document.querySelector("#newspack_modal_checkout");a&&e.observe(a),n.style.display="none"}))}))}))})),t.addEventListener("click",(function(e){e.target===t&&o(t)})),t.querySelectorAll(".newspack-blocks-donate-checkout-modal__close").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),o(t)}))}))}},"undefined"!=typeof document&&("complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",t):t());var c=window;for(var a in n)c[a]=n[a];n.__esModule&&Object.defineProperty(c,"__esModule",{value:!0})})();