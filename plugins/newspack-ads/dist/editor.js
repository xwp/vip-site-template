(()=>{var e={4184:(e,t)=>{var n;
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var o=a.apply(null,n);o&&e.push(o)}}else if("object"===i){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var c in n)r.call(n,c)&&n[c]&&e.push(c)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},5366:(e,t,n)=>{"object"==typeof window&&window.Jetpack_Block_Assets_Base_Url&&(n.p=window.Jetpack_Block_Assets_Base_Url)},4981:e=>{"use strict";e.exports=window.wp.blocks},5609:e=>{"use strict";e.exports=window.wp.components},9307:e=>{"use strict";e.exports=window.wp.element},907:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:()=>r})},5057:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(907);function a(e){if(Array.isArray(e))return(0,r.Z)(e)}},9199:(e,t,n)=>{"use strict";function r(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:()=>r})},2786:(e,t,n)=>{"use strict";function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:()=>r})},9062:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(5057),a=n(9199),i=n(181),o=n(2786);function c(e){return(0,r.Z)(e)||(0,a.Z)(e)||(0,i.Z)(e)||(0,o.Z)()}},181:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(907);function a(e,t){if(e){if("string"==typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})();var r={};(()=>{"use strict";n(5366);var e=n(9062),t=n(9307),r=n(4981),a=n(5609);const i=function(e){var n=e.size,r=void 0===n?24:n;return(0,t.createElement)(a.SVG,{className:"newspack-logo",width:r,height:r,viewBox:"0 0 32 32"},(0,t.createElement)(a.Path,{d:"M16 32c8.836 0 16-7.164 16-16S24.836 0 16 0 0 7.164 0 16s7.163 16 16 16z",fill:"#36f"}),(0,t.createElement)(a.Path,{d:"M22.988 16.622h-1.72l-1.103-1.124h2.823v1.124zm0-3.31H18.02l-1.102-1.124h6.071v1.124zm0-3.31h-8.217l-1.103-1.125h9.32v1.125zm0 13.12L9.012 8.878v4.749l.069.071h-.07v9.426h3.451v-5.98l5.867 5.98h4.66z",fill:"#fff"}))};(0,r.setCategories)([].concat((0,e.Z)((0,r.getCategories)().filter((function(e){return"newspack"!==e.slug}))),[{slug:"newspack",title:"Newspack",icon:(0,t.createElement)(i,null)}]))})(),(()=>{"use strict";n.r(r);var e=n(4981),t=n(9307);const a=window.wp.primitives,i=(0,t.createElement)(a.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(a.Path,{d:"M18 8H6c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2zm.5 6c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5v-4c0-.3.2-.5.5-.5h12c.3 0 .5.2.5.5v4zM4 4v1.5h16V4H4zm0 16h16v-1.5H4V20z"})),o=window.wp.i18n;function c(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(l){return void n(l)}c.done?t(s):Promise.resolve(s).then(r,a)}var s=n(9062);var l=n(181);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],_n=!0,o=!1;try{for(n=n.call(e);!(_n=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);_n=!0);}catch(c){o=!0,a=c}finally{try{_n||null==n.return||n.return()}finally{if(o)throw a}}return i}}(e,t)||(0,l.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d=n(4184),p=n.n(d);const v=window.wp.blockEditor;var f=n(5609);const m=window.wp.apiFetch;var w=n.n(m);const b=(0,t.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(a.Path,{d:"M20.1 5.1L16.9 2 6.2 12.7l-1.3 4.4 4.5-1.3L20.1 5.1zM4 20.8h8v-1.5H4v1.5z"}));function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var __=o.__,k=function(e){return[{label:__("Select a provider","newspack-ads"),value:""}].concat((0,s.Z)(e.map((function(e){return{label:e.name,value:e.id}}))))};const E=function(e){var n,r=e.label,a=void 0===r?__("Ad Unit","newspack"):r,i=e.providers,c=void 0===i?[]:i,l=e.bidders,d=void 0===l?{}:l,p=e.value,v=void 0===p?{}:p,m=e.disabled,w=void 0!==m&&m,b=e.onChange,g=void 0===b?function(){}:b,E=u((0,t.useState)({}),2),S=E[0],_=E[1],x=c.find((function(e){return(null==e?void 0:e.id)===(v.provider||"gam")}))||c[0];return(0,t.useEffect)((function(){var e={};Object.keys(d).forEach((function(t){var n,r=d[t],a=null==x?void 0:x.units.find((function(e){return e.value===v.ad_unit})),i=v.ad_unit&&a&&(n=r.ad_sizes,a.sizes.some((function(e){return(n||[]).find((function(t){return t[0]===e[0]&&t[1]===e[1]}))})));e[t]=v.ad_unit&&a&&!i?(0,o.sprintf)(__("%s does not support the selected ad unit sizes.","newspack"),r.name,""):null})),_(e)}),[c,v.ad_unit]),c.length?(0,t.createElement)(t.Fragment,null,c.length>1&&(0,t.createElement)(f.SelectControl,{label:__("Provider","newspack"),value:null==x?void 0:x.id,options:k(c),onChange:function(e){return g(y(y({},v),{},{provider:e}))},disabled:w}),(0,t.createElement)(f.SelectControl,{label:a,value:v.ad_unit,options:(n=x,null!=n&&n.units?[{label:__("Select an Ad Unit","newspack-ads"),value:""}].concat((0,s.Z)(n.units.map((function(e){return{label:e.name,value:e.value}})))):[]),onChange:function(e){return g(y(y({},v),{},{ad_unit:e}))},disabled:w}),"gam"===(null==x?void 0:x.id)&&Object.keys(d).map((function(e){var n=d[e],r=(0,o.sprintf)(__("%s Placement ID","newspack-ads"),n.name);return(0,t.createElement)(f.TextControl,{key:e,value:v.bidders_ids?v.bidders_ids[e]:null,label:r,disabled:S[e]||w,onChange:function(t){return g(y(y({},v),{},{bidders_ids:y(y({},v.bidders_ids),{},h({},e,t))}))}})})),"gam"===(null==x?void 0:x.id)&&Object.keys(S).map((function(e){return S[e]?(0,t.createElement)(f.Notice,{key:e,status:"warning",isDismissible:!1},S[e]):null}))):(0,t.createElement)(f.Notice,{isWarning:!0,noticeText:__("There is no provider available.","newspack-ads"),isDismissible:!1})};var S=o.__;const _=function(e){var n,r=e.attributes,a=e.setAttributes,o=u((0,t.useState)(!1),2),l=o[0],d=o[1],m=u((0,t.useState)(null),2),h=m[0],g=m[1],y=u((0,t.useState)(!1),2),k=y[0],_=y[1],x=u((0,t.useState)(null),2),j=x[0],O=x[1],P=u((0,t.useState)([]),2),A=P[0],Z=P[1],z=u((0,t.useState)({}),2),M=z[0],C=z[1],T=(0,v.useBlockProps)({className:"newspack-ads-ad-block"}),B=A.find((function(e){return e.id.toString()===r.provider})),N=null==B||null===(n=B.units)||void 0===n?void 0:n.find((function(e){return e.value.toString()===r.ad_unit})),D=(null==N?void 0:N.sizes)||[],U=D.length?Math.max.apply(Math,(0,s.Z)(D.map((function(e){return e[0]})))):300,F=D.length?Math.max.apply(Math,(0,s.Z)(D.map((function(e){return e[1]})))):200;return(0,t.useEffect)((function(){var e=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.activeAd&&!r.ad_unit&&a({ad_unit:r.activeAd}),d(!0),e.prev=2,e.t0=Z,e.next=6,w()({path:"/newspack-ads/v1/providers"});case 6:e.t1=e.sent,(0,e.t0)(e.t1),e.next=13;break;case 10:e.prev=10,e.t2=e.catch(2),g(e.t2);case 13:return e.prev=13,e.t3=C,e.next=17,w()({path:"/newspack-ads/v1/bidders"});case 17:e.t4=e.sent,(0,e.t3)(e.t4),e.next=24;break;case 21:e.prev=21,e.t5=e.catch(13),O(e.t5);case 24:d(!1);case 25:case"end":return e.stop()}}),e,null,[[2,10],[13,21]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){c(i,r,a,o,s,"next",e)}function s(e){c(i,r,a,o,s,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();e()}),[]),(0,t.useEffect)((function(){null!=A&&A.length&&!r.provider&&a({provider:A[0].id})}),[A]),(0,t.createElement)("div",T,!k&&N?(0,t.createElement)(t.Fragment,null,!l&&(0,t.createElement)(v.BlockControls,null,(0,t.createElement)(f.ToolbarGroup,null,(0,t.createElement)(f.ToolbarButton,{icon:b,label:S("Edit","newspack-ads"),onClick:function(){return _(!0)}}))),h&&(0,t.createElement)(f.Notice,{isError:!0,noticeText:h,isDismissible:!1}),"gam"===B&&j&&(0,t.createElement)(f.Notice,{isWarning:!0,noticeText:j,isDismissible:!1}),(0,t.createElement)("div",{className:"newspack-ads-ad-block-placeholder",style:{width:U,height:F}},(0,t.createElement)(t.Fragment,null,(0,t.createElement)(f.SVG,{className:"newspack-ads-ad-block-mock",width:U,viewBox:"0 0 "+U+" "+F},(0,t.createElement)("rect",{width:U,height:F,strokeDasharray:"2"}),(0,t.createElement)("line",{x1:"0",y1:"0",x2:"100%",y2:"100%",strokeDasharray:"2"})),(0,t.createElement)("span",{className:"newspack-ads-ad-block-ad-label"},A.length>1&&"".concat(B.name," - ")," ",N.name,(0,t.createElement)("br",null),D.length?D.map((function(e){return"".concat(e[0],"x").concat(e[1])})).join(", "):S("Unknown size","newspack-ads"))),l&&(0,t.createElement)(f.Spinner,null))):(0,t.createElement)(f.Placeholder,{label:S("Ad Unit","newspack-ads"),icon:i},(0,t.createElement)("div",{className:"newspack-ads-ad-block-edit"},l?(0,t.createElement)(f.Spinner,null):(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:p()({"newspack-ads-ad-block-edit-fields":!0})},(0,t.createElement)(E,{providers:A,bidders:M,value:r,onChange:function(e){_(!0),a(e)}}),(0,t.createElement)(f.Button,{disabled:!N,onClick:function(){return _(!1)},isPrimary:!0},S("Save","newspack-ads")))))))};var x=o.__,j={title:x("Ad Unit","newspack-ads"),icon:{src:i,foreground:"#36f"},category:(0,e.getCategories)().some((function(e){return"newspack"===e.slug}))?"newspack":"common",keywords:[x("ad","newspack-ads"),x("advert","newspack-ads"),x("ads","newspack-ads")],description:x("Render an ad unit from your inventory.","newspack-ads"),attributes:{provider:{type:"string"},ad_unit:{type:"string"},bidders_ids:{type:"object",default:{}},activeAd:{type:"string"}},supports:{html:!1,align:["left","center","right","wide","full"],color:{text:!1,background:!0}},edit:_,save:function(){return null}};(0,e.registerBlockType)("newspack-ads/".concat("ad-unit"),j)})();var a=window;for(var i in r)a[i]=r[i];r.__esModule&&Object.defineProperty(a,"__esModule",{value:!0})})();